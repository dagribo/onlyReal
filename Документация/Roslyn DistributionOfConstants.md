### Протяжка констант внутри базового блока
Локальные оптимизации трехадресного кода. Оптимизация константных значения переменных

### Команда Roslyn

#### Постановка задачи
Требуется найти внутри базового блока переменные, имеющих константное значение, и заменить имена переменных во всех выражениях внутри данного базового блока, использующих данные переменные, их значениями.

#### Зависимости задач в графе задач
Задача зависит от:
* генерации трехадресного кода.

#### Теория
В исходном  коде программ часто встречаются выражения, которые содержат использование переменных, имеющих константное значение. Примером такого кода может  служить код, приведенный ниже:
```cpp
double pi = 3.14;
double r = 5.67;
double S = pi * r * r;
```
Подобные выражения можно оптимизировать, если при компиляции исходного кода программы произвести подстановку значений константных переменных по всему коду за местом присваивания данной переменной. Это позволит сделать вычисление программы более быстрым, поскольку потребуется меньше памяти для вычисления программы, поскольку некоторые переменные перестанут быть необходимыми, и операций работы с оперативной памятью станет меньше.

#### Особенности реализации
При использовании кода, производящего оптимизацию протяжки констант внутри базового блока, следует использовать класс, реализующий каскадные оптимизации трехадресного кода программы AutoThreeCodeOptimiser. Таким образом, последовательность действий для использования данной оптимизации будет следующей:
1) сгенерировать трехадресный код;
2) создать объект *SimpleLang.ThreeCodeOptimisations.AutoThreeCodeOptimiser*;
3) добавить к созданному объекту новый объект типа *SimpleLang.ThreeCodeOptimisations.DistributionOfConstants*;
4) вызвать метод Apply объекта AutoThreeCodeOptimiser.
```csharp
using SimpleLang.ThreeCodeOptimisations;
...
AutoThreeCodeOptimiser opt = new AutoThreeCodeOptimiser();
opt.Add(new DistributionOfConstants());
opt.Apply(visitor);
```
В данном коде подразумевается, что переменная *visitor* является объектом класса *ThreeAddressCodeVisitor*.


#### Тесты
Для исходного кода 
```csharp
{
	real a;
	a = 67.0;
	real b;
	b = 13.0;
	real c;
	c = a - b + (a/b + b/a - (a/a) * (b/b));
}
```
генератор трехадресного кода генерирует следующий код:
```csharp
    a = 67
    b = 13
    temp_1 = a - b
    temp_4 = a / b
    temp_5 = b / a
    temp_3 = temp_4 + temp_5
    temp_7 = a / a
    temp_8 = b / b
    temp_6 = temp_7 * temp_8
    temp_2 = temp_3 - temp_6
    temp_0 = temp_1 + temp_2
    c = temp_0
```
После использования оптимизации свертки констант получается следующий код:
```csharp
    a = 67
    b = 13
    temp_1 = 67 - 13
    temp_4 = 67 / 13
    temp_5 = 13 / 67
    temp_3 = temp_4 + temp_5
    temp_7 = 67 / 67
    temp_8 = 13 / 13
    temp_6 = temp_7 * temp_8
    temp_2 = temp_3 - temp_6
    temp_0 = temp_1 + temp_2
    c = temp_0
```

Если к выше представленному программному коду, написанном на реализованном языке программирования применить каскадно следующие оптимизации:
* свертка констант;
* распространение констант внутри базового блока;
* живые или мертвые переменные,
то получится с оптимизировать код до следующего:
```csharp
    a = 67
    b = 13
    c = 58.3478760045924
```
